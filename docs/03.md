## 3.ハンズオンアプリケーション作成手順
今回のハンズオンでは、Webフォームを作成し、必要情報を入力してPOSTすると、各社のデータ取得APIと連携してセンサーデータを取得、DynamoDBに格納後に可視化する流れとなります。以下にその作成手順を追いながら説明します。



### 3.1.アプリケーション作成の手順

1. Lambda関数に割り当てるIAMロールの作成
* Lambda関数から各AWSサービスを利用するための権限を設定する

2. API Gatewayから実行されるLambda関数を作成
* 設計図（blue-print）からAPI GatewayをプロキシとしたLambda関数を作成
* 動作結果をCloudWatchのログで確認

3. S3にWebフォームを配置する
* S3にパケットを作成し、静的Webサーバ機能を有効化する
* index.htmlをアップロードする

4. DynamoDBにテーブルを作成する
* センサーデータ格納用テーブルを作成する
* シーケンス管理用テーブルを作成する

5. API Gatewayから実行されるLambda関数を修正
* 部APIと連携し、結果をDynamoDBに格納するようプログラムを修正（zipファイルのアップロード）

6. Elasticsearch Serivceドメインを作成する
* 可視化ツールで検索しやすいようにインデックスを作成する

7. DynamoDBのストリームを有効化する
* 作成したセンサーデータ格納用テーブルに対して、ストリームを有効化する

8. DynamoDB Streamsからデータを取得するLambda関数を作成
* DynamoDBからストリームとしてデータを取得する
* Elasticsearch Serviceへデータを登録する

9. Elasticsearchのインデックス設定  
* 地理情報を扱うためのインデックスマッピングを変更

10. アプリケーションの動作確認
* アプリケーションを実行し、DynamoDBへの格納、Elasticsearchへの登録を確認する


